% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/set_group_pi.R
\name{set_group_pi}
\alias{set_group_pi}
\title{Create Group Probability of Infection Function}
\usage{
set_group_pi(type, model_fixed_params)
}
\arguments{
\item{type}{Character string specifying the model type. Must be one of:
\code{"MuenchGeneral"}, \code{"MuenchRestricted"}, \code{"Griffiths"},
\code{"Farringtons"}, \code{"PiecewiseConstant"}.}

\item{model_fixed_params}{List of fixed parameters required by the chosen model type.
For example:
\itemize{
\item MuenchRestricted: \code{list(k = ..., l = ...)}
\item Griffiths: \code{list(tau = ...)}
\item PiecewiseConstant: \code{list(upper_cutoffs = ...)}
}}
}
\value{
A function \code{group_pi(a, b, par)} where:
\itemize{
\item \code{a} is the lower age bound.
\item \code{b} is the upper age bound.
\item \code{par} is a numeric vector of model parameters to be estimated.
}
The returned function computes the average infection probability over \eqn{[a, b]}.
}
\description{
Returns a function that computes the average probability of infection
between two ages \code{a} and \code{b}, based on the specified model type.
This is often used in catalytic models for age-stratified infection data.
}
\details{
Supported model types:
\itemize{
\item \code{"MuenchGeneral"}: General Muench model with three parameters (\eqn{k}, \eqn{l}, \eqn{\lambda}).
\item \code{"MuenchRestricted"}: Muench model with fixed \eqn{k} and \eqn{l}, estimating only \eqn{\lambda}.
\item \code{"Griffiths"}: Griffiths model with a change point \eqn{\tau} and parameters \eqn{\gamma_0}, \eqn{\gamma_1}.
\item \code{"Farringtons"}: Farringtonâ€™s model with parameters \eqn{\gamma_0}, \eqn{\gamma_1}, \eqn{\gamma_2}.
\item \code{"PiecewiseConstant"}: Piecewise constant force of infection model with specified age cutoffs.
}

For some models, the computation involves:
\itemize{
\item Analytical formulas (\code{MuenchGeneral}, \code{MuenchRestricted}, \code{Griffiths}).
\item Numerical integration (\code{Farringtons}).
\item Stepwise integration over defined age intervals (\code{PiecewiseConstant}).
}

The Griffiths model implementation uses the error function via \code{pnorm},
and Farrington's model uses \code{\link[stats]{integrate}} with error handling.
}
